# 開発の進め方

## 要件定義・API設計

- 実装したいAPIのエンドポイント、リクエスト/レスポンス仕様、認証要件などを整理
- 必要に応じてOpenAPI(Swagger)仕様書を作成

## データベース設計

[データモデル設計](./docs/データモデル設計.md)を参照。

## ドメインモデル設計

- エンティティや値オブジェクト、集約などのドメインモデルを洗い出す
- 各モデルの責務や関連、ライフサイクルを整理
- TypeScriptのクラスやインターフェースでモデルを実装
    - 状態遷移を実現する場合、各状態ごとに型（クラス）を定義し、各状態ごとに可能な操作を定義する。
    - 状態遷移の制約等を実現するためにインスタンス生成に制約をかける必要があれば、privateコンストラクタをもつクラスを使う。
- ドメインサービスやリポジトリのインターフェースを定義
- ユースケースごとにドメイン層のテストを作成
- 実装後、要件変更に強い構造になっているか見直す

## Prisma Clientの生成

- Prisma Clientを生成

## NestJSモジュール・サービス・コントローラ作成

- nest g module <name> で機能ごとにモジュール作成
- nest g service <name> でビジネスロジック層作成
- nest g controller <name> でAPIエンドポイント作成
- PrismaServiceを作成し、DIで各サービスからPrisma Clientを利用

## API実装

- まずテスト（ユニットテスト/E2Eテスト）を作成し、失敗することを確認
- サービス層でPrisma Clientを使いDBアクセス実装
- コントローラでリクエスト/レスポンス処理
- バリデーションやエラーハンドリングも追加
- テストがパスするまで実装・リファクタリングを繰り返す

## コード整形・Lint

- npm run format でPrettierによる整形
- npm run lint でESLintによる静的解析

##  動作確認・デバッグ

- npm run start:dev でサーバ起動
- PostmanやcurlでAPI動作確認

## ドキュメント整備

- READMEやAPI仕様書の更新
- 必要に応じてSwagger導入
